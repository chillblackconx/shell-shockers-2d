<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Shell Shokers 2D</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #111;
      color: white;
      text-align: center;
    }
    #menu {
      margin-top: 50px;
    }
    canvas {
      background: #333;
      display: none;
      margin: 20px auto;
      border: 3px solid white;
    }
  </style>
</head>
<body>
  <div id="menu">
    <h1>Shell Shokers 2D</h1>
    <input id="username" placeholder="Pseudo">
    <br><br>
    <select id="mode">
      <option value="ffa">Tous contre tous</option>
      <option value="teams">Rouge vs Bleu</option>
    </select>
    <br><br>
    <select id="map">
      <option value="map1">Map 1</option>
      <option value="map2">Map 2</option>
    </select>
    <br><br>
    <button onclick="startGame()">Jouer</button>
  </div>

  <canvas id="gameCanvas" width="800" height="600"></canvas>

  <!-- Charger les maps -->
  <script src="maps.html"></script>

  <script>
    let canvas, ctx;
    let player = {x:100,y:100,w:20,h:20,color:"white",hp:100};
    let enemies = [];
    let currentMap = [];

    function startGame(){
      document.getElementById("menu").style.display="none";
      canvas = document.getElementById("gameCanvas");
      ctx = canvas.getContext("2d");
      canvas.style.display="block";

      const mapChoice = document.getElementById("map").value;
      currentMap = maps[mapChoice];

      // spawn bots
      for(let i=0;i<3;i++){
        enemies.push({x:200+100*i,y:200,w:20,h:20,color:"red",hp:100});
      }

      gameLoop();
    }

    function gameLoop(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // dessiner map
      ctx.fillStyle="gray";
      currentMap.forEach(p=>{
        ctx.fillRect(p.x,p.y,p.w,p.h);
      });

      // dessiner joueur
      ctx.fillStyle=player.color;
      ctx.fillRect(player.x,player.y,player.w,player.h);

      // dessiner ennemis
      enemies.forEach(e=>{
        ctx.fillStyle=e.color;
        ctx.fillRect(e.x,e.y,e.w,e.h);
      });

      requestAnimationFrame(gameLoop);
    }
  </script>
</body>
</html>
